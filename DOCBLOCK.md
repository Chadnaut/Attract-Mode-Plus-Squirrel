## DocBlocks

DocBlocks are used to integrate documentation with the code, providing content for completions, hover tips, and more. They can also be used to modify the default completion behaviour, providing a more intuitive workflow.

### Autogenerated

By typing `/**` the completion `/** Autogenerated Doc */` will appear. When preceding a function this will output a basic template containing the parameters and return type of the function.

## Package

An `/** Autogenerated Package */` completion will appear when a DocBlock is created at the very first character of a file.

- `Description` - A short paragraph description for this file.
- `@package name` - The name to display alongside completions from this package. If omitted the filename will be used. It should be a dozen characters or less.
- `@summary description` - A short summary of this file. For modules this will be displayed in the sidebar. It should be a dozen words or less.
- `@version value description` - The version of this file in the format `major.minor.patch`.
- `@author username` - The author who created this file. The default value can be changed in the extension settings.
- `@url website` - The link this file can be download from. The default value can be changed in the extension settings.

### Package Requirements

- `@requires` - When selected from the completion popup this will populate the following attributes.
- `@artwork description` - A comma delimited list of all artwork resources used in this package.
- `@module name url` - A module required by this package, preferably with a url to download it if not distributed with this file.

## Descriptions

Descriptions appear when hovering over code structures or entering function arguments. They can use simple markdown, and span multiple lines.

```ts
/**
 * My function description here.
 * - Bullet *point*
 * - [title](my_url_here)
 *
 * Paragraphs are separated by an empty line.
 * @param {integer} arg My argument description
 * @returns {string} My return description
 */
function foo(arg) {} // `foo` shows the descriptions in a hover tip
```

- `Description` - The first section of a DocBlock (without an @attribute) is used as the main description.
- `@param {type} name description` - Documents a function parameter, the name must match the one in the code.
- `@returns {type} description` - Documents the function return type. Will not be displayed if its description is omitted, but will still affect its type.

## Types

All primitive Squirrel types can be used for `@param` and `@returns`:

- `{integer}`, `{float}`, `{string}`, `{boolean}`, `{table}`, `{array}`
- `{*}` can used when *any* type can is allowed.
- Additionally a `{ClassName}` may be used.

### Extended Types

The `@param {type}` attribute accepts extra arguments to provide additional completion suggestions.

- `{string(value1|value2|value3)}` - Adds suggestions `"value1", "value2", "value3"` for the given parameter.
- `{string($name)}` - Adds pre-computed suggestions, where `$name` is one of:
  - `$module` - module files, loads file into global scope.
  - `$file` - files in app folder, loads file into global scope.
  - `$nut` - `.nut` files in current layout/plugin folder, loads file into global scope.
  - `$artwork` - artwork resource labels.
  - `$image` - image files in current layout/plugin folder.
  - `$video` - video files in current layout/plugin folder.
  - `$audio` - audio files in current layout/plugin folder.
  - `$shader` - shader files in current layout/plugin folder.
- `{string(=name)}` - Adds suggestions from a local array variable called `name`:
  - `local name = ["value1", "value2", "value3"]`
- `{array(string)}` - Defines an array's element type.

```ts
/**
 * @param {string(alpha|beta|gamma)} value My parameter
 */
function foo(value) {}
foo("") // after typing the first " suggests "alpha", "beta", "gamma"
```

## Meta Methods

Squirrel uses the meta-methods `_get` and `_set` as "catch-alls" to provide *getter* & *setter* functionality. The following attributes document these properties so they appear as individual completions.

- `@property {type} name description` - Document a `get` and/or `set` property.
- `@getter {type} name description` - Document a `get` property.
- `@setter {type} name description` - Document a `set` property.

These attributes can only be placed in a:
- Class Definition DocBlock.
- `_get` method DocBlock.
- `_set` method DocBlock.

The `_call` meta-method - which make a Class instance callable - will append a Class instance's DocBlock with its own, to provide parameter and completion IntelliSense.

```ts
/**
 * @property {integer} prop This is my property
 */
class Foo {
    function _get(key) { /* Getter code */ }
    function _set(key, value) { /* Setter code */ }
}

local f = Foo();
f.prop = 123; // `prop` will appear as a completion
```

## Access

While Squirrel has no concept of public, protected or private properties, these attributes will limit their visibility in completions.

- `@public` - Completion shows in all cases, which is the default.
- `@protected` - Completion shows only in owner and extended classes.
- `@private` - Completion shows only in owner class.
- `@ignore` - Do not show this item in any completions.

```ts
class Foo {
    /** @private */
    function alpha() {}
    function beta() {}
}

local f = Foo();
f.alpha(); // `alpha` will not appear as a completion
f.beta();
```

## Wrappers

Sometimes a Class will be used as a wrapper to provide additional functionality for a built-in element. The following attributes can be useful to forward the passed elements completions. NOTE: The `_get` and `_set` forwarding must be implemented by the Class.

- `@augments {param}` - The parameter whose definition will be forwarded as Class completions.

```ts
class Foo {
    /**
     * @augments element The named arg provides completions for this class
     */
    constructor(element) {}

    // Forwarding implementation here
}
```

## Snippets

DocBlocks can be used to create snippets, which are completions that insert pre-defined text.

- `@keyword name` - Defines the keyword used to trigger the snippet.
- `@kind name` - The kind of snippet to create
  - `property` = A class property
  - `magic` - A magic token
  - `attr` - A DocBlock attribute
  - If snippet text exist the kind will be `snippet`
  - Otherwise the kind will be `keyword`
- `@snippet text` - When following `@keyword` this value will be used as the insert text.

```ts
/**
 * @keyword mysnippet Description
 * @snippet My snippet content
 */
mysnippet // `mysnippet` appears as a completion...
My snippet content // ...and gets replaced when selected

/**
 * @keyword mykey Description
 */
mykey // `mykey` appears as a keyword completion

/**
 * @keyword mytoken
 * @kind magic
 */
"string [mytoken]" // `mytoken` appears as a MagicToken completion

/**
 * @keyword myprop Description
 * @kind property
 * @snippet
 * myPropValue() {}
 */
class foo {
    myprop // `myprop` appears as a property completion
}

/**
 * @keyword myattr
 * @kind attr
 */
/**
 * @myattr // `myattr` appears as a DocBlock attribute completion
 */
```

## Styling

- `@enum` - Style the completion as an `enum`, commonly used for exported `tables` (since actual enums cannot be exported).
- `@method` - Style the completion as a `method`, commonly used for class property functions, which are otherwise styled as properties.
- `@class` - Style the completion as a `class`, commonly used for table properties that are classes.
- `@deprecated` - Draws a ~~strike-through~~ to indicate deprecated items.

```ts
/** @enum */
mytable <- { alpha = 123 }

mytable.alpha // will be visually styled as an enum
```

## Internal Attributes

These attributes are for API documentation only, since many of the features are not applicable to Squirrel code.

### Primitive Type Completions

Primitive types such as `string` and `array` have their own methods, such as `len()`.

- `@lends` - Flags a class as a type-completion. The class must be named identically to the AST node type it is defining, such as `StringLiteral` or `ArrayExpression`. Class methods then become completions for the primitive type.

### Miscellaneous

- `@global` - Makes completions available to **ALL** documents (without requiring an import), and disables linking to them.
  - Used for all `fe` objects.
- `@alias name` - Override the name used for the completion signature.
  - Used by `@lends` classes to improve popup descriptions.
- `@variation name` - Flags a function as a variation of an existing named function.
  - Copies the description from the given function.
  - Completions will show only the first function.
  - Signatures will allow switching between the variations.
  - Used by `fe` overloads such as `add_image`.
- `@inheritdoc` - Copies the entire DocBlock from the assigned item, with the exception of the `@ignore` attribute.
- `@inheritdoc!` - Copies the entire DocBlock from the assigned item, including the `@ignore` attribute.
- `@exports` - Export completions that are not normally exported, such as `enum`.
- `@constant` - Flags a item as a `consttable` definition, so it doesn't appear as a root-global completion.
- `@type {type}` - Override the items type, which affects it completions.
  - If no type is given, no completions will appear.
  - If a class is given itself as the type, primitive completions will be omitted.
  - Used internally for Threads, Generators and Weakrefs.
- `@kind name` - When following a `@keyword` snippet this value will be used as the *completion kind*, which changes the icon displayed for the completion.
- `@external $name` - Replaces a variable's value with a computed one.
  - Used for filename resolution, where `$name` is one of:
  - `$script_dir`, `$module_dir`, `$FeConfigDirectory`
